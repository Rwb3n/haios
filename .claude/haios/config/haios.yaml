# generated: 2026-01-03
# System Auto: last updated on: 2026-01-30T21:27:58
# HAIOS System Configuration
# Consolidates: governance-toggles.yaml, routing-thresholds.yaml
# Version: 2.4 (Session 265 - The Activity Layer)

# Plugin manifest (for portable plugin spec)
manifest:
  name: haios
  version: "2.4"
  description: "Hybrid AI Operating System - Governed Activities Framework"

# Current epoch context (ADR-042: Arc > Chapter in hierarchy)
epoch:
  current: E2.4
  subversion: "2.4"  # The Activity Layer
  epoch_file: ".claude/haios/epochs/E2_4/EPOCH.md"
  architecture_dir: ".claude/haios/epochs/E2_4/architecture"
  arcs_dir: ".claude/haios/epochs/E2_4/arcs"
  observations_dir: ".claude/haios/epochs/E2_4/observations"
  # Prior epoch (for reference)
  prior_epoch: ".claude/haios/epochs/E2_3/EPOCH.md"
  # Foundational architecture (MUST load) - carries forward
  foundational:
    - S20-pressure-dynamics.md
    - S21-cognitive-notation.md
    - S22-skill-patterns.md
  # Active arcs (E2.4 - carried + new)
  active_arcs:
    - activities      # NEW: Governed activities per state
    - templates       # NEW: Fractured phase templates
    - flow            # NEW: Universal flow with gates
    - configuration   # CARRIED: Loader system
    - workuniversal   # CARRIED: Add mode field

# Governance toggles (from governance-toggles.yaml)
toggles:
  block_powershell: true  # PowerShell through bash mangles $_ variables
  # block_sql: true       # Future: migrate from hardcoded

# Routing thresholds (from routing-thresholds.yaml)
thresholds:
  observation_pending:
    enabled: true
    max_count: 10
    divert_to: observation-triage-cycle
    escape_priorities: [critical]

# Context loading configuration (WORK-008)
# Role-based loader dispatch per L4 principles
context:
  roles:
    main:
      loaders: [identity]
      description: "Main agent - philosophical grounding"
    builder:
      loaders: [identity]
      description: "Builder agent - identity + work context"
    validator:
      loaders: [identity]
      description: "Validator agent - identity + requirements"
  loader_registry:
    identity:
      module: identity_loader
      class: IdentityLoader

# Agent configurations (E2-072: Phase-as-Subagent pattern)
agents:
  critique:
    description: "Pre-implementation assumption surfacing"
    framework: assumption_surfacing  # Default framework
    frameworks_dir: ".claude/haios/config/critique_frameworks/"
    integration:
      gate: plan-validation-cycle.CRITIQUE
      trigger: pre-DO
    context_loading:
      - manifesto/L4/agent_user_requirements.md
      - work_item
      - plan
