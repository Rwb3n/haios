# generated: 2026-01-03
# System Auto: last updated on: 2026-02-03T00:32:26
# HAIOS System Configuration
# Consolidates: governance-toggles.yaml, routing-thresholds.yaml
# Version: 2.5 (Session 295 - Independent Lifecycles)

# Plugin manifest (for portable plugin spec)
manifest:
  name: haios
  version: "2.5"
  description: "Hybrid AI Operating System - Independent Lifecycles"

# Current epoch context (ADR-042: Arc > Chapter in hierarchy)
epoch:
  current: E2.5
  subversion: "2.5"  # Independent Lifecycles
  epoch_file: ".claude/haios/epochs/E2_5/EPOCH.md"
  architecture_dir: ".claude/haios/epochs/E2_5/architecture"
  arcs_dir: ".claude/haios/epochs/E2_5/arcs"
  observations_dir: ".claude/haios/epochs/E2_5/observations"
  # Prior epoch (for reference)
  prior_epoch: ".claude/haios/epochs/E2_4/EPOCH.md"
  # Foundational architecture (MUST load) - carries forward
  foundational:
    - S20-pressure-dynamics.md
    - S21-cognitive-notation.md
    - S22-skill-patterns.md
    - S27-breath-model.md  # NEW: E2.4 discovery, foundational for E2.5
  # Active arcs (E2.5 - implementation of E2.4 designs)
  active_arcs:
    - lifecycles      # NEW: CycleRunner pure function semantics
    - queue           # NEW: Orthogonal queue tracking
    - ceremonies      # NEW: Side-effect boundary implementations
    - feedback        # NEW: Review ceremonies
    - assets          # NEW: Typed, versioned asset production

# Governance toggles (from governance-toggles.yaml)
toggles:
  block_powershell: true  # PowerShell through bash mangles $_ variables
  # block_sql: true       # Future: migrate from hardcoded

# Routing thresholds (from routing-thresholds.yaml)
thresholds:
  observation_pending:
    enabled: true
    max_count: 10
    divert_to: observation-triage-cycle
    escape_priorities: [critical]

# Path constants (single source of truth - WORK-080)
paths:
  # Work item paths
  work_dir: "docs/work"
  work_active: "docs/work/active"
  work_archive: "docs/work/archive"
  work_item: "docs/work/active/{id}/WORK.md"
  work_plan: "docs/work/active/{id}/plans/PLAN.md"
  work_queues: ".claude/haios/config/work_queues.yaml"

  # Document paths
  checkpoints: "docs/checkpoints"
  reports: "docs/reports"
  adr: "docs/ADR"
  specs: "docs/specs"

  # Plugin paths
  templates: ".claude/templates"
  skills: ".claude/skills"
  commands: ".claude/commands"
  agents: ".claude/agents"
  hooks: ".claude/hooks"

  # Config paths
  haios_config: ".claude/haios/config"
  manifesto: ".claude/haios/manifesto"
  status: ".claude/haios-status.json"
  status_slim: ".claude/haios-status-slim.json"

# Context loading configuration (WORK-008)
# Role-based loader dispatch per L4 principles
context:
  roles:
    main:
      loaders: [identity]
      description: "Main agent - philosophical grounding"
    builder:
      loaders: [identity]
      description: "Builder agent - identity + work context"
    validator:
      loaders: [identity]
      description: "Validator agent - identity + requirements"
  loader_registry:
    identity:
      module: identity_loader
      class: IdentityLoader

# Agent configurations (E2-072: Phase-as-Subagent pattern)
agents:
  critique:
    description: "Pre-implementation assumption surfacing"
    framework: assumption_surfacing  # Default framework
    frameworks_dir: ".claude/haios/config/critique_frameworks/"
    integration:
      gate: plan-validation-cycle.CRITIQUE
      trigger: pre-DO
    context_loading:
      - manifesto/L4/agent_user_requirements.md
      - work_item
      - plan
