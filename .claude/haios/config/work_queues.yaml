# generated: 2026-01-15
# System Auto: last updated on: 2026-01-19T13:28:21
# Work Queue Configuration (E2-290, INV-064 design)
# Provides typed queues with cycle-locking for structured work execution
version: "1.0"

# Queue type definitions
queue_types:
  fifo:
    ordering: "creation_date ASC"
  priority:
    ordering: "priority DESC, creation_date ASC"
  batch:
    phases: [plan_all, review, implement_all, validate_all]
  chapter_aligned:
    ordering: "chapter_priority DESC, priority DESC"

# Active queues
queues:
  # WORKITEM-EVOLUTION queue - Session 208 (Pre-E2.3 Migration Focus)
  workitem-evolution:
    type: fifo  # Ordered execution - spec first, then implementation
    items:
      - WORK-001  # Universal Work Item Structure (TRD-WORK-ITEM-UNIVERSAL spec)
      - E2-179    # Scaffold Recipe Optional Frontmatter Args (spawn_by etc)
    allowed_cycles: [implementation-cycle, work-creation-cycle]
    rationale: "Session 208: Solidify work item schema before E2.3 migration. WORK-001 defines spec, E2-179 improves tooling."

  # PIPELINE queue - Epoch 2.3 (Session 206: Doc-to-Product Pipeline)
  pipeline:
    type: fifo  # Ordered execution - each step enables the next
    items: []   # Populated after workitem-evolution complete
    allowed_cycles: [implementation-cycle, investigation-cycle]
    rationale: "Session 206: Building the doc-to-product pipeline. FIFO because steps are sequential."

  # GOVERNANCE queue - Session 193 priority (governance hardening focus)
  governance:
    type: priority
    items:
      - E2-291   # Wire Queue into Survey-Cycle and Routing-Gate (critical gap S192)
      - INV-054  # Validation Cycle Fitness for Purpose (semantic L4 alignment)
      - INV-041  # Single Source Path Constants Architecture (drift prevention)
      - E2-164   # Coldstart L1 Context Review (agent efficiency)
    allowed_cycles: [implementation-cycle, investigation-cycle]
    rationale: "Session 193: Governance hardening per S192 learnings"

  # Default queue - everything else, priority ordering
  default:
    type: priority
    items: auto  # Populated from get_ready() excluding governance queue
    allowed_cycles: [implementation-cycle, investigation-cycle, work-creation-cycle]

# Policies
policies:
  assignment:
    default_queue: default
    auto_batch_threshold: 3  # Suggest batch for 3+ related items
  cross_arc:
    allowed: true  # Queues can span arcs
  cycle_enforcement:
    strict: true  # Block cycles not in allowed_cycles
