---
template: observation
session: 223
seq: 1
title: Path Dependency Validation Gate Required
category: gap
priority: high
status: pending
source_work: WORK-006
action: spawn_work
generated: 2026-01-21
last_updated: '2026-01-21T22:26:16'
---
# Observation: Path Dependency Validation Gate Required

## What Was Observed

WORK-006 lib migration was marked complete but actually failed because:
1. Files were gitignored (standard Python `lib/` pattern)
2. `PROJECT_ROOT` and `CONFIG_DIR` paths inside files weren't updated
3. Tests passed because they imported from OLD location

The CHECK phase has no gate for path dependency validation.

## Gap Identified

**Missing:** A validation gate in implementation-cycle CHECK phase or work-creation-cycle that verifies:
1. New files are tracked by git (not gitignored)
2. Path-dependent code (`__file__`, `PROJECT_ROOT`, relative paths) resolves correctly from new location
3. Imports use the intended location, not fallback

## Recommended Action

Add to implementation-cycle CHECK phase or dod-validation-cycle:

```yaml
# In cycles.yaml or validation rules
path_dependency_validation:
  triggers:
    - file_move
    - file_copy
    - directory_restructure
  checks:
    - git_tracked: "git ls-files includes new paths"
    - path_resolution: "PROJECT_ROOT from __file__ resolves to actual project root"
    - no_gitignore_conflict: "git check-ignore returns empty"
```

## Where to Implement

Options:
1. **dod-validation-cycle** - Add as a DoD criterion for file operations
2. **preflight-checker agent** - Add path validation before DO phase
3. **work-creation-cycle POPULATE** - Surface as deliverable requirement for file moves

## References

- WORK-006: Root cause was gitignore + path constants
- Session 223: Discovery and fix
- Memory 82270-82280: Detailed learning
